"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/generate-image";
exports.ids = ["pages/api/generate-image"];
exports.modules = {

/***/ "canvas":
/*!*************************!*\
  !*** external "canvas" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("canvas");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/../backend/config/typography.js":
/*!***************************************!*\
  !*** ../backend/config/typography.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/constants/index.js */ \"(api)/../shared/constants/index.js\");\n// Typography configuration for all templates\n\n\nconst typographyConfig = {\n  template1: {\n    font: {\n      family: _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.FONTS.FAMILIES.JOST_MEDIUM,\n      size: 42,\n      lineHeight: _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.LAYOUT.LINE_HEIGHT,\n      color: _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.COLORS.PRIMARY_TEXT,\n      opacity: _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.LAYOUT.TEXT_OPACITY\n    },\n    boldFont: {\n      family: _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.FONTS.FAMILIES.JOST_BOLD,\n      size: 42,\n      lineHeight: _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.LAYOUT.LINE_HEIGHT,\n      color: _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.COLORS.PRIMARY_TEXT,\n      opacity: _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.LAYOUT.TEXT_OPACITY\n    },\n    layout: {\n      maxWidth: _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.LAYOUT.MAX_WIDTH_RATIO,\n      marginTop: _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.LAYOUT.MARGIN_TOP_RATIO,\n      textAlign: 'center'\n    }\n  }\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (typographyConfig);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi4vYmFja2VuZC9jb25maWcvdHlwb2dyYXBoeS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ3dFOztBQUV4RTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZEQUFLO0FBQ25CO0FBQ0Esa0JBQWtCLDhEQUFNO0FBQ3hCLGFBQWEsOERBQU07QUFDbkIsZUFBZSw4REFBTTtBQUNyQixLQUFLO0FBQ0w7QUFDQSxjQUFjLDZEQUFLO0FBQ25CO0FBQ0Esa0JBQWtCLDhEQUFNO0FBQ3hCLGFBQWEsOERBQU07QUFDbkIsZUFBZSw4REFBTTtBQUNyQixLQUFLO0FBQ0w7QUFDQSxnQkFBZ0IsOERBQU07QUFDdEIsaUJBQWlCLDhEQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlFQUFlLGdCQUFnQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL2JhY2tlbmQvY29uZmlnL3R5cG9ncmFwaHkuanM/YzNmZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUeXBvZ3JhcGh5IGNvbmZpZ3VyYXRpb24gZm9yIGFsbCB0ZW1wbGF0ZXNcbmltcG9ydCB7IENPTE9SUywgRk9OVFMsIExBWU9VVCB9IGZyb20gJy4uLy4uL3NoYXJlZC9jb25zdGFudHMvaW5kZXguanMnO1xuXG5jb25zdCB0eXBvZ3JhcGh5Q29uZmlnID0ge1xuICB0ZW1wbGF0ZTE6IHtcbiAgICBmb250OiB7XG4gICAgICBmYW1pbHk6IEZPTlRTLkZBTUlMSUVTLkpPU1RfTUVESVVNLFxuICAgICAgc2l6ZTogNDIsXG4gICAgICBsaW5lSGVpZ2h0OiBMQVlPVVQuTElORV9IRUlHSFQsXG4gICAgICBjb2xvcjogQ09MT1JTLlBSSU1BUllfVEVYVCxcbiAgICAgIG9wYWNpdHk6IExBWU9VVC5URVhUX09QQUNJVFlcbiAgICB9LFxuICAgIGJvbGRGb250OiB7XG4gICAgICBmYW1pbHk6IEZPTlRTLkZBTUlMSUVTLkpPU1RfQk9MRCxcbiAgICAgIHNpemU6IDQyLFxuICAgICAgbGluZUhlaWdodDogTEFZT1VULkxJTkVfSEVJR0hULFxuICAgICAgY29sb3I6IENPTE9SUy5QUklNQVJZX1RFWFQsXG4gICAgICBvcGFjaXR5OiBMQVlPVVQuVEVYVF9PUEFDSVRZXG4gICAgfSxcbiAgICBsYXlvdXQ6IHtcbiAgICAgIG1heFdpZHRoOiBMQVlPVVQuTUFYX1dJRFRIX1JBVElPLFxuICAgICAgbWFyZ2luVG9wOiBMQVlPVVQuTUFSR0lOX1RPUF9SQVRJTyxcbiAgICAgIHRleHRBbGlnbjogJ2NlbnRlcidcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHR5cG9ncmFwaHlDb25maWc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/../backend/config/typography.js\n");

/***/ }),

/***/ "(api)/../backend/errors/error-handler.js":
/*!******************************************!*\
  !*** ../backend/errors/error-handler.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FontError: () => (/* binding */ FontError),\n/* harmony export */   ImageGenerationError: () => (/* binding */ ImageGenerationError),\n/* harmony export */   TemplateError: () => (/* binding */ TemplateError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   handleApiError: () => (/* binding */ handleApiError),\n/* harmony export */   validateTemplate: () => (/* binding */ validateTemplate),\n/* harmony export */   validateText: () => (/* binding */ validateText)\n/* harmony export */ });\n// Centralized error handling system\n\nclass ImageGenerationError extends Error {\n  constructor(message, code, originalError = null) {\n    super(message);\n    this.name = 'ImageGenerationError';\n    this.code = code;\n    this.originalError = originalError;\n  }\n}\n\nclass TemplateError extends Error {\n  constructor(message, templateName, originalError = null) {\n    super(message);\n    this.name = 'TemplateError';\n    this.templateName = templateName;\n    this.originalError = originalError;\n  }\n}\n\nclass FontError extends Error {\n  constructor(message, fontFamily, originalError = null) {\n    super(message);\n    this.name = 'FontError';\n    this.fontFamily = fontFamily;\n    this.originalError = originalError;\n  }\n}\n\nclass ValidationError extends Error {\n  constructor(message, field, originalError = null) {\n    super(message);\n    this.name = 'ValidationError';\n    this.field = field;\n    this.originalError = originalError;\n  }\n}\n\n/**\n * Handle API errors with proper HTTP status codes\n * @param {Error} error - The error to handle\n * @param {Object} res - Express response object\n */\nconst handleApiError = (error, res) => {\n  console.error('API Error:', error);\n\n  if (error instanceof ValidationError) {\n    return res.status(400).json({\n      success: false,\n      message: error.message,\n      field: error.field\n    });\n  }\n\n  if (error instanceof TemplateError) {\n    return res.status(404).json({\n      success: false,\n      message: `Template not found: ${error.templateName}`,\n      code: 'TEMPLATE_NOT_FOUND'\n    });\n  }\n\n  if (error instanceof FontError) {\n    return res.status(500).json({\n      success: false,\n      message: `Font loading failed: ${error.fontFamily}`,\n      code: 'FONT_ERROR'\n    });\n  }\n\n  if (error instanceof ImageGenerationError) {\n    return res.status(500).json({\n      success: false,\n      message: error.message,\n      code: error.code\n    });\n  }\n\n  // Generic error handling\n  return res.status(500).json({\n    success: false,\n    message: 'Internal server error',\n    code: 'INTERNAL_ERROR'\n  });\n};\n\n/**\n * Validate text input\n * @param {string} text - Text to validate\n * @returns {void}\n * @throws {ValidationError} If text is invalid\n */\nconst validateText = (text) => {\n  if (!text || typeof text !== 'string') {\n    throw new ValidationError('Text is required', 'text');\n  }\n\n  if (text.trim().length === 0) {\n    throw new ValidationError('Text cannot be empty', 'text');\n  }\n\n  if (text.length > 1000) {\n    throw new ValidationError('Text is too long (max 1000 characters)', 'text');\n  }\n};\n\n/**\n * Validate template name\n * @param {string} template - Template name to validate\n * @returns {void}\n * @throws {ValidationError} If template is invalid\n */\nconst validateTemplate = (template) => {\n  if (!template || typeof template !== 'string') {\n    throw new ValidationError('Template is required', 'template');\n  }\n\n  const validTemplates = ['template1', 'template2', 'template3', 'template4', 'template5', 'template6'];\n  if (!validTemplates.includes(template)) {\n    throw new ValidationError(`Invalid template: ${template}`, 'template');\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi4vYmFja2VuZC9lcnJvcnMvZXJyb3ItaGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsUUFBUTtBQUNuQjtBQUNPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsbUJBQW1CO0FBQ3pEO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxpQkFBaUI7QUFDeEQ7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiLFlBQVksaUJBQWlCO0FBQzdCO0FBQ087QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiLFlBQVksaUJBQWlCO0FBQzdCO0FBQ087QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1EQUFtRCxTQUFTO0FBQzVEO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vYmFja2VuZC9lcnJvcnMvZXJyb3ItaGFuZGxlci5qcz8yMTE5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIENlbnRyYWxpemVkIGVycm9yIGhhbmRsaW5nIHN5c3RlbVxuXG5leHBvcnQgY2xhc3MgSW1hZ2VHZW5lcmF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGNvZGUsIG9yaWdpbmFsRXJyb3IgPSBudWxsKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gJ0ltYWdlR2VuZXJhdGlvbkVycm9yJztcbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIHRoaXMub3JpZ2luYWxFcnJvciA9IG9yaWdpbmFsRXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHRlbXBsYXRlTmFtZSwgb3JpZ2luYWxFcnJvciA9IG51bGwpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnVGVtcGxhdGVFcnJvcic7XG4gICAgdGhpcy50ZW1wbGF0ZU5hbWUgPSB0ZW1wbGF0ZU5hbWU7XG4gICAgdGhpcy5vcmlnaW5hbEVycm9yID0gb3JpZ2luYWxFcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRm9udEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBmb250RmFtaWx5LCBvcmlnaW5hbEVycm9yID0gbnVsbCkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdGb250RXJyb3InO1xuICAgIHRoaXMuZm9udEZhbWlseSA9IGZvbnRGYW1pbHk7XG4gICAgdGhpcy5vcmlnaW5hbEVycm9yID0gb3JpZ2luYWxFcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBmaWVsZCwgb3JpZ2luYWxFcnJvciA9IG51bGwpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnVmFsaWRhdGlvbkVycm9yJztcbiAgICB0aGlzLmZpZWxkID0gZmllbGQ7XG4gICAgdGhpcy5vcmlnaW5hbEVycm9yID0gb3JpZ2luYWxFcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIEhhbmRsZSBBUEkgZXJyb3JzIHdpdGggcHJvcGVyIEhUVFAgc3RhdHVzIGNvZGVzXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJvciAtIFRoZSBlcnJvciB0byBoYW5kbGVcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXMgLSBFeHByZXNzIHJlc3BvbnNlIG9iamVjdFxuICovXG5leHBvcnQgY29uc3QgaGFuZGxlQXBpRXJyb3IgPSAoZXJyb3IsIHJlcykgPT4ge1xuICBjb25zb2xlLmVycm9yKCdBUEkgRXJyb3I6JywgZXJyb3IpO1xuXG4gIGlmIChlcnJvciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICBmaWVsZDogZXJyb3IuZmllbGRcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChlcnJvciBpbnN0YW5jZW9mIFRlbXBsYXRlRXJyb3IpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiBgVGVtcGxhdGUgbm90IGZvdW5kOiAke2Vycm9yLnRlbXBsYXRlTmFtZX1gLFxuICAgICAgY29kZTogJ1RFTVBMQVRFX05PVF9GT1VORCdcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChlcnJvciBpbnN0YW5jZW9mIEZvbnRFcnJvcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IGBGb250IGxvYWRpbmcgZmFpbGVkOiAke2Vycm9yLmZvbnRGYW1pbHl9YCxcbiAgICAgIGNvZGU6ICdGT05UX0VSUk9SJ1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgSW1hZ2VHZW5lcmF0aW9uRXJyb3IpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgY29kZTogZXJyb3IuY29kZVxuICAgIH0pO1xuICB9XG5cbiAgLy8gR2VuZXJpYyBlcnJvciBoYW5kbGluZ1xuICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgIG1lc3NhZ2U6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxuICAgIGNvZGU6ICdJTlRFUk5BTF9FUlJPUidcbiAgfSk7XG59O1xuXG4vKipcbiAqIFZhbGlkYXRlIHRleHQgaW5wdXRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gVGV4dCB0byB2YWxpZGF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIHRleHQgaXMgaW52YWxpZFxuICovXG5leHBvcnQgY29uc3QgdmFsaWRhdGVUZXh0ID0gKHRleHQpID0+IHtcbiAgaWYgKCF0ZXh0IHx8IHR5cGVvZiB0ZXh0ICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1RleHQgaXMgcmVxdWlyZWQnLCAndGV4dCcpO1xuICB9XG5cbiAgaWYgKHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1RleHQgY2Fubm90IGJlIGVtcHR5JywgJ3RleHQnKTtcbiAgfVxuXG4gIGlmICh0ZXh0Lmxlbmd0aCA+IDEwMDApIHtcbiAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdUZXh0IGlzIHRvbyBsb25nIChtYXggMTAwMCBjaGFyYWN0ZXJzKScsICd0ZXh0Jyk7XG4gIH1cbn07XG5cbi8qKlxuICogVmFsaWRhdGUgdGVtcGxhdGUgbmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IHRlbXBsYXRlIC0gVGVtcGxhdGUgbmFtZSB0byB2YWxpZGF0ZVxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIHRlbXBsYXRlIGlzIGludmFsaWRcbiAqL1xuZXhwb3J0IGNvbnN0IHZhbGlkYXRlVGVtcGxhdGUgPSAodGVtcGxhdGUpID0+IHtcbiAgaWYgKCF0ZW1wbGF0ZSB8fCB0eXBlb2YgdGVtcGxhdGUgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignVGVtcGxhdGUgaXMgcmVxdWlyZWQnLCAndGVtcGxhdGUnKTtcbiAgfVxuXG4gIGNvbnN0IHZhbGlkVGVtcGxhdGVzID0gWyd0ZW1wbGF0ZTEnLCAndGVtcGxhdGUyJywgJ3RlbXBsYXRlMycsICd0ZW1wbGF0ZTQnLCAndGVtcGxhdGU1JywgJ3RlbXBsYXRlNiddO1xuICBpZiAoIXZhbGlkVGVtcGxhdGVzLmluY2x1ZGVzKHRlbXBsYXRlKSkge1xuICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoYEludmFsaWQgdGVtcGxhdGU6ICR7dGVtcGxhdGV9YCwgJ3RlbXBsYXRlJyk7XG4gIH1cbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/../backend/errors/error-handler.js\n");

/***/ }),

/***/ "(api)/../backend/services/image-generator.js":
/*!**********************************************!*\
  !*** ../backend/services/image-generator.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var canvas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! canvas */ \"canvas\");\n/* harmony import */ var canvas__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(canvas__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _config_typography_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config/typography.js */ \"(api)/../backend/config/typography.js\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils_character_width_cache_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/character-width-cache.js */ \"(api)/../backend/utils/character-width-cache.js\");\n/* harmony import */ var _template_service_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./template-service.js */ \"(api)/../backend/services/template-service.js\");\n/* harmony import */ var _text_processing_service_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./text-processing-service.js */ \"(api)/../backend/services/text-processing-service.js\");\n/* harmony import */ var _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../shared/constants/index.js */ \"(api)/../shared/constants/index.js\");\n/* harmony import */ var _errors_error_handler_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../errors/error-handler.js */ \"(api)/../backend/errors/error-handler.js\");\n\n\n\n\n\n\n\n\n\nclass ImageGenerator {\n  constructor() {\n    this.templatePath = '/public/templates/';\n    this.templateMapping = _template_service_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getTemplateMapping();\n    this.registerFonts();\n  }\n\n  registerFonts() {\n    try {\n      // Register Jost fonts\n      (0,canvas__WEBPACK_IMPORTED_MODULE_0__.registerFont)(path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.FONTS.PATHS.JOST_MEDIUM), { \n        family: _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.FONTS.FAMILIES.JOST_MEDIUM \n      });\n      (0,canvas__WEBPACK_IMPORTED_MODULE_0__.registerFont)(path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.FONTS.PATHS.JOST_BOLD), { \n        family: _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.FONTS.FAMILIES.JOST_BOLD \n      });\n      (0,canvas__WEBPACK_IMPORTED_MODULE_0__.registerFont)(path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.FONTS.PATHS.CRIMSON_REGULAR), { \n        family: _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.FONTS.FAMILIES.CRIMSON_REGULAR \n      });\n    } catch (error) {\n      throw new _errors_error_handler_js__WEBPACK_IMPORTED_MODULE_7__.FontError('Font registration failed', 'all', error);\n    }\n  }\n\n  async generateImage(text, template = 'template1') {\n    try {\n      // Load template based on template name\n      const templateImage = await this.loadTemplate(template);\n      \n      // Parse text segments\n      const textSegments = _text_processing_service_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].parseTextWithLineBreaks(text);\n      \n      // Generate images for each segment using the same typography config\n      const images = [];\n      for (const segment of textSegments) {\n        const imageBuffer = await this.createImageWithText(segment, templateImage);\n        images.push(imageBuffer);\n      }\n      \n      return images;\n    } catch (error) {\n      if (error instanceof _errors_error_handler_js__WEBPACK_IMPORTED_MODULE_7__.ImageGenerationError || error instanceof _errors_error_handler_js__WEBPACK_IMPORTED_MODULE_7__.TemplateError || error instanceof _errors_error_handler_js__WEBPACK_IMPORTED_MODULE_7__.FontError) {\n        throw error;\n      }\n      throw new _errors_error_handler_js__WEBPACK_IMPORTED_MODULE_7__.ImageGenerationError(`Image generation failed: ${error.message}`, 'GENERATION_FAILED', error);\n    }\n  }\n\n  async loadTemplate(templateName) {\n    try {\n      const templateFile = this.templateMapping[templateName] || _template_service_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getTemplateFileName('template1');\n      return await (0,canvas__WEBPACK_IMPORTED_MODULE_0__.loadImage)(path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), this.templatePath + templateFile));\n    } catch (error) {\n      throw new _errors_error_handler_js__WEBPACK_IMPORTED_MODULE_7__.TemplateError(`Failed to load template: ${templateName}`, templateName, error);\n    }\n  }\n\n  async createImageWithText(text, templateImage) {\n    // Create canvas\n    const canvas = (0,canvas__WEBPACK_IMPORTED_MODULE_0__.createCanvas)(_shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.CANVAS_CONFIG.WIDTH, _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.CANVAS_CONFIG.HEIGHT);\n    const ctx = canvas.getContext('2d');\n    \n    // Draw template background\n    ctx.drawImage(templateImage, 0, 0, _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.CANVAS_CONFIG.WIDTH, _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.CANVAS_CONFIG.HEIGHT);\n    \n    // Apply typography and render text\n    const config = _config_typography_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].template1;\n    this.applyTypography(ctx, text, config, _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.CANVAS_CONFIG.WIDTH);\n    \n    return canvas.toBuffer('image/png');\n  }\n\n  applyTypography(ctx, text, config, canvasWidth) {\n    // Set text alignment and baseline\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'middle';\n    \n    // Apply text shadow\n    this.addTextShadow(ctx);\n    \n    // Calculate text positioning\n    const maxWidth = canvasWidth * config.layout.maxWidth;\n    const x = canvasWidth / 2;\n    const y = canvasWidth * config.layout.marginTop;\n    \n    // Parse text for bold formatting and render\n    this.parseAndRenderText(ctx, text, x, y, maxWidth, config);\n  }\n\n  parseAndRenderText(ctx, text, x, y, maxWidth, config) {\n    // Parse text for **bold** formatting and split into words\n    const words = _text_processing_service_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].parseBoldText(text);\n    const lines = _text_processing_service_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].wrapTextToLines(words, maxWidth, config);\n    \n    // Get the pre-computed character width cache\n    const charWidthCache = (0,_utils_character_width_cache_js__WEBPACK_IMPORTED_MODULE_3__.getCharacterWidthCache)();\n    \n    // Render lines\n    const lineHeight = config.font.size * config.font.lineHeight;\n    const startY = y - (lines.length - 1) * lineHeight / 2;\n    \n    lines.forEach((line, lineIndex) => {\n      let currentX = x;\n      const lineY = startY + lineIndex * lineHeight;\n      \n      // Calculate total width of line for centering\n      const lineWidth = _text_processing_service_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].calculateLineWidth(line, charWidthCache);\n      const lineStartX = x - lineWidth / 2;\n      currentX = lineStartX;\n      \n      line.forEach((word, wordIndex) => {\n        // Set font based on bold formatting\n        const fontConfig = word.bold ? config.boldFont : config.font;\n        ctx.font = `${fontConfig.size}px \"${fontConfig.family}\", \"CrimsonText Regular\", serif`;\n        ctx.fillStyle = fontConfig.color;\n        ctx.globalAlpha = fontConfig.opacity;\n        \n        // Add space before word (except for first word in line)\n        if (wordIndex > 0) {\n          const spaceWidth = charWidthCache.regular.get(' ');\n          currentX += spaceWidth;\n        }\n        \n        // Render word\n        ctx.fillText(word.text, currentX, lineY);\n        \n        // Update X position for next word\n        const wordWidth = _text_processing_service_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].calculateWordWidth(word, charWidthCache);\n        currentX += wordWidth;\n      });\n    });\n  }\n\n  addTextShadow(ctx) {\n    ctx.shadowColor = _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.TEXT_SHADOW.COLOR;\n    ctx.shadowBlur = _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.TEXT_SHADOW.BLUR;\n    ctx.shadowOffsetX = _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.TEXT_SHADOW.OFFSET_X;\n    ctx.shadowOffsetY = _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_6__.TEXT_SHADOW.OFFSET_Y;\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ImageGenerator);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi4vYmFja2VuZC9zZXJ2aWNlcy9pbWFnZS1nZW5lcmF0b3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Q7QUFDUjtBQUMvQjtBQUNtRDtBQUN2QjtBQUNhO0FBQ21CO0FBQ1E7O0FBRTVGO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwrRUFBa0M7QUFDN0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG9EQUFZLENBQUMsZ0RBQVMsZ0JBQWdCLDZEQUFLO0FBQ2pELGdCQUFnQiw2REFBSztBQUNyQixPQUFPO0FBQ1AsTUFBTSxvREFBWSxDQUFDLGdEQUFTLGdCQUFnQiw2REFBSztBQUNqRCxnQkFBZ0IsNkRBQUs7QUFDckIsT0FBTztBQUNQLE1BQU0sb0RBQVksQ0FBQyxnREFBUyxnQkFBZ0IsNkRBQUs7QUFDakQsZ0JBQWdCLDZEQUFLO0FBQ3JCLE9BQU87QUFDUCxNQUFNO0FBQ04sZ0JBQWdCLCtEQUFTO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDJGQUE2QztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sMkJBQTJCLDBFQUFvQixxQkFBcUIsbUVBQWEscUJBQXFCLCtEQUFTO0FBQy9HO0FBQ0E7QUFDQSxnQkFBZ0IsMEVBQW9CLDZCQUE2QixjQUFjO0FBQy9FO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlFQUFpRSxnRkFBbUM7QUFDcEcsbUJBQW1CLGlEQUFTLENBQUMsZ0RBQVM7QUFDdEMsTUFBTTtBQUNOLGdCQUFnQixtRUFBYSw2QkFBNkIsYUFBYTtBQUN2RTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsb0RBQVksQ0FBQyxxRUFBYSxRQUFRLHFFQUFhO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxxRUFBYSxRQUFRLHFFQUFhO0FBQ3pFO0FBQ0E7QUFDQSxtQkFBbUIsdUVBQTBCO0FBQzdDLDRDQUE0QyxxRUFBYTtBQUN6RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixpRkFBbUM7QUFDckQsa0JBQWtCLG1GQUFxQztBQUN2RDtBQUNBO0FBQ0EsMkJBQTJCLHVGQUFzQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixzRkFBd0M7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGdCQUFnQixNQUFNLGtCQUFrQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzRkFBd0M7QUFDbEU7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0Esc0JBQXNCLG1FQUFXO0FBQ2pDLHFCQUFxQixtRUFBVztBQUNoQyx3QkFBd0IsbUVBQVc7QUFDbkMsd0JBQXdCLG1FQUFXO0FBQ25DO0FBQ0E7O0FBRUEsaUVBQWUsY0FBYyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL2JhY2tlbmQvc2VydmljZXMvaW1hZ2UtZ2VuZXJhdG9yLmpzP2VkNTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2FudmFzLCBsb2FkSW1hZ2UsIHJlZ2lzdGVyRm9udCB9IGZyb20gJ2NhbnZhcyc7XG5pbXBvcnQgdHlwb2dyYXBoeUNvbmZpZyBmcm9tICcuLi9jb25maWcvdHlwb2dyYXBoeS5qcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IGdldENoYXJhY3RlcldpZHRoQ2FjaGUgfSBmcm9tICcuLi91dGlscy9jaGFyYWN0ZXItd2lkdGgtY2FjaGUuanMnO1xuaW1wb3J0IFRlbXBsYXRlU2VydmljZSBmcm9tICcuL3RlbXBsYXRlLXNlcnZpY2UuanMnO1xuaW1wb3J0IFRleHRQcm9jZXNzaW5nU2VydmljZSBmcm9tICcuL3RleHQtcHJvY2Vzc2luZy1zZXJ2aWNlLmpzJztcbmltcG9ydCB7IENBTlZBU19DT05GSUcsIEZPTlRTLCBURVhUX1NIQURPVyB9IGZyb20gJy4uLy4uL3NoYXJlZC9jb25zdGFudHMvaW5kZXguanMnO1xuaW1wb3J0IHsgSW1hZ2VHZW5lcmF0aW9uRXJyb3IsIFRlbXBsYXRlRXJyb3IsIEZvbnRFcnJvciB9IGZyb20gJy4uL2Vycm9ycy9lcnJvci1oYW5kbGVyLmpzJztcblxuY2xhc3MgSW1hZ2VHZW5lcmF0b3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnRlbXBsYXRlUGF0aCA9ICcvcHVibGljL3RlbXBsYXRlcy8nO1xuICAgIHRoaXMudGVtcGxhdGVNYXBwaW5nID0gVGVtcGxhdGVTZXJ2aWNlLmdldFRlbXBsYXRlTWFwcGluZygpO1xuICAgIHRoaXMucmVnaXN0ZXJGb250cygpO1xuICB9XG5cbiAgcmVnaXN0ZXJGb250cygpIHtcbiAgICB0cnkge1xuICAgICAgLy8gUmVnaXN0ZXIgSm9zdCBmb250c1xuICAgICAgcmVnaXN0ZXJGb250KHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCBGT05UUy5QQVRIUy5KT1NUX01FRElVTSksIHsgXG4gICAgICAgIGZhbWlseTogRk9OVFMuRkFNSUxJRVMuSk9TVF9NRURJVU0gXG4gICAgICB9KTtcbiAgICAgIHJlZ2lzdGVyRm9udChwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgRk9OVFMuUEFUSFMuSk9TVF9CT0xEKSwgeyBcbiAgICAgICAgZmFtaWx5OiBGT05UUy5GQU1JTElFUy5KT1NUX0JPTEQgXG4gICAgICB9KTtcbiAgICAgIHJlZ2lzdGVyRm9udChwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgRk9OVFMuUEFUSFMuQ1JJTVNPTl9SRUdVTEFSKSwgeyBcbiAgICAgICAgZmFtaWx5OiBGT05UUy5GQU1JTElFUy5DUklNU09OX1JFR1VMQVIgXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEZvbnRFcnJvcignRm9udCByZWdpc3RyYXRpb24gZmFpbGVkJywgJ2FsbCcsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZW5lcmF0ZUltYWdlKHRleHQsIHRlbXBsYXRlID0gJ3RlbXBsYXRlMScpIHtcbiAgICB0cnkge1xuICAgICAgLy8gTG9hZCB0ZW1wbGF0ZSBiYXNlZCBvbiB0ZW1wbGF0ZSBuYW1lXG4gICAgICBjb25zdCB0ZW1wbGF0ZUltYWdlID0gYXdhaXQgdGhpcy5sb2FkVGVtcGxhdGUodGVtcGxhdGUpO1xuICAgICAgXG4gICAgICAvLyBQYXJzZSB0ZXh0IHNlZ21lbnRzXG4gICAgICBjb25zdCB0ZXh0U2VnbWVudHMgPSBUZXh0UHJvY2Vzc2luZ1NlcnZpY2UucGFyc2VUZXh0V2l0aExpbmVCcmVha3ModGV4dCk7XG4gICAgICBcbiAgICAgIC8vIEdlbmVyYXRlIGltYWdlcyBmb3IgZWFjaCBzZWdtZW50IHVzaW5nIHRoZSBzYW1lIHR5cG9ncmFwaHkgY29uZmlnXG4gICAgICBjb25zdCBpbWFnZXMgPSBbXTtcbiAgICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiB0ZXh0U2VnbWVudHMpIHtcbiAgICAgICAgY29uc3QgaW1hZ2VCdWZmZXIgPSBhd2FpdCB0aGlzLmNyZWF0ZUltYWdlV2l0aFRleHQoc2VnbWVudCwgdGVtcGxhdGVJbWFnZSk7XG4gICAgICAgIGltYWdlcy5wdXNoKGltYWdlQnVmZmVyKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGltYWdlcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgSW1hZ2VHZW5lcmF0aW9uRXJyb3IgfHwgZXJyb3IgaW5zdGFuY2VvZiBUZW1wbGF0ZUVycm9yIHx8IGVycm9yIGluc3RhbmNlb2YgRm9udEVycm9yKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEltYWdlR2VuZXJhdGlvbkVycm9yKGBJbWFnZSBnZW5lcmF0aW9uIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAsICdHRU5FUkFUSU9OX0ZBSUxFRCcsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBsb2FkVGVtcGxhdGUodGVtcGxhdGVOYW1lKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRlbXBsYXRlRmlsZSA9IHRoaXMudGVtcGxhdGVNYXBwaW5nW3RlbXBsYXRlTmFtZV0gfHwgVGVtcGxhdGVTZXJ2aWNlLmdldFRlbXBsYXRlRmlsZU5hbWUoJ3RlbXBsYXRlMScpO1xuICAgICAgcmV0dXJuIGF3YWl0IGxvYWRJbWFnZShwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgdGhpcy50ZW1wbGF0ZVBhdGggKyB0ZW1wbGF0ZUZpbGUpKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFRlbXBsYXRlRXJyb3IoYEZhaWxlZCB0byBsb2FkIHRlbXBsYXRlOiAke3RlbXBsYXRlTmFtZX1gLCB0ZW1wbGF0ZU5hbWUsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjcmVhdGVJbWFnZVdpdGhUZXh0KHRleHQsIHRlbXBsYXRlSW1hZ2UpIHtcbiAgICAvLyBDcmVhdGUgY2FudmFzXG4gICAgY29uc3QgY2FudmFzID0gY3JlYXRlQ2FudmFzKENBTlZBU19DT05GSUcuV0lEVEgsIENBTlZBU19DT05GSUcuSEVJR0hUKTtcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBcbiAgICAvLyBEcmF3IHRlbXBsYXRlIGJhY2tncm91bmRcbiAgICBjdHguZHJhd0ltYWdlKHRlbXBsYXRlSW1hZ2UsIDAsIDAsIENBTlZBU19DT05GSUcuV0lEVEgsIENBTlZBU19DT05GSUcuSEVJR0hUKTtcbiAgICBcbiAgICAvLyBBcHBseSB0eXBvZ3JhcGh5IGFuZCByZW5kZXIgdGV4dFxuICAgIGNvbnN0IGNvbmZpZyA9IHR5cG9ncmFwaHlDb25maWcudGVtcGxhdGUxO1xuICAgIHRoaXMuYXBwbHlUeXBvZ3JhcGh5KGN0eCwgdGV4dCwgY29uZmlnLCBDQU5WQVNfQ09ORklHLldJRFRIKTtcbiAgICBcbiAgICByZXR1cm4gY2FudmFzLnRvQnVmZmVyKCdpbWFnZS9wbmcnKTtcbiAgfVxuXG4gIGFwcGx5VHlwb2dyYXBoeShjdHgsIHRleHQsIGNvbmZpZywgY2FudmFzV2lkdGgpIHtcbiAgICAvLyBTZXQgdGV4dCBhbGlnbm1lbnQgYW5kIGJhc2VsaW5lXG4gICAgY3R4LnRleHRBbGlnbiA9ICdsZWZ0JztcbiAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG4gICAgXG4gICAgLy8gQXBwbHkgdGV4dCBzaGFkb3dcbiAgICB0aGlzLmFkZFRleHRTaGFkb3coY3R4KTtcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgdGV4dCBwb3NpdGlvbmluZ1xuICAgIGNvbnN0IG1heFdpZHRoID0gY2FudmFzV2lkdGggKiBjb25maWcubGF5b3V0Lm1heFdpZHRoO1xuICAgIGNvbnN0IHggPSBjYW52YXNXaWR0aCAvIDI7XG4gICAgY29uc3QgeSA9IGNhbnZhc1dpZHRoICogY29uZmlnLmxheW91dC5tYXJnaW5Ub3A7XG4gICAgXG4gICAgLy8gUGFyc2UgdGV4dCBmb3IgYm9sZCBmb3JtYXR0aW5nIGFuZCByZW5kZXJcbiAgICB0aGlzLnBhcnNlQW5kUmVuZGVyVGV4dChjdHgsIHRleHQsIHgsIHksIG1heFdpZHRoLCBjb25maWcpO1xuICB9XG5cbiAgcGFyc2VBbmRSZW5kZXJUZXh0KGN0eCwgdGV4dCwgeCwgeSwgbWF4V2lkdGgsIGNvbmZpZykge1xuICAgIC8vIFBhcnNlIHRleHQgZm9yICoqYm9sZCoqIGZvcm1hdHRpbmcgYW5kIHNwbGl0IGludG8gd29yZHNcbiAgICBjb25zdCB3b3JkcyA9IFRleHRQcm9jZXNzaW5nU2VydmljZS5wYXJzZUJvbGRUZXh0KHRleHQpO1xuICAgIGNvbnN0IGxpbmVzID0gVGV4dFByb2Nlc3NpbmdTZXJ2aWNlLndyYXBUZXh0VG9MaW5lcyh3b3JkcywgbWF4V2lkdGgsIGNvbmZpZyk7XG4gICAgXG4gICAgLy8gR2V0IHRoZSBwcmUtY29tcHV0ZWQgY2hhcmFjdGVyIHdpZHRoIGNhY2hlXG4gICAgY29uc3QgY2hhcldpZHRoQ2FjaGUgPSBnZXRDaGFyYWN0ZXJXaWR0aENhY2hlKCk7XG4gICAgXG4gICAgLy8gUmVuZGVyIGxpbmVzXG4gICAgY29uc3QgbGluZUhlaWdodCA9IGNvbmZpZy5mb250LnNpemUgKiBjb25maWcuZm9udC5saW5lSGVpZ2h0O1xuICAgIGNvbnN0IHN0YXJ0WSA9IHkgLSAobGluZXMubGVuZ3RoIC0gMSkgKiBsaW5lSGVpZ2h0IC8gMjtcbiAgICBcbiAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBsaW5lSW5kZXgpID0+IHtcbiAgICAgIGxldCBjdXJyZW50WCA9IHg7XG4gICAgICBjb25zdCBsaW5lWSA9IHN0YXJ0WSArIGxpbmVJbmRleCAqIGxpbmVIZWlnaHQ7XG4gICAgICBcbiAgICAgIC8vIENhbGN1bGF0ZSB0b3RhbCB3aWR0aCBvZiBsaW5lIGZvciBjZW50ZXJpbmdcbiAgICAgIGNvbnN0IGxpbmVXaWR0aCA9IFRleHRQcm9jZXNzaW5nU2VydmljZS5jYWxjdWxhdGVMaW5lV2lkdGgobGluZSwgY2hhcldpZHRoQ2FjaGUpO1xuICAgICAgY29uc3QgbGluZVN0YXJ0WCA9IHggLSBsaW5lV2lkdGggLyAyO1xuICAgICAgY3VycmVudFggPSBsaW5lU3RhcnRYO1xuICAgICAgXG4gICAgICBsaW5lLmZvckVhY2goKHdvcmQsIHdvcmRJbmRleCkgPT4ge1xuICAgICAgICAvLyBTZXQgZm9udCBiYXNlZCBvbiBib2xkIGZvcm1hdHRpbmdcbiAgICAgICAgY29uc3QgZm9udENvbmZpZyA9IHdvcmQuYm9sZCA/IGNvbmZpZy5ib2xkRm9udCA6IGNvbmZpZy5mb250O1xuICAgICAgICBjdHguZm9udCA9IGAke2ZvbnRDb25maWcuc2l6ZX1weCBcIiR7Zm9udENvbmZpZy5mYW1pbHl9XCIsIFwiQ3JpbXNvblRleHQgUmVndWxhclwiLCBzZXJpZmA7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBmb250Q29uZmlnLmNvbG9yO1xuICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBmb250Q29uZmlnLm9wYWNpdHk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgc3BhY2UgYmVmb3JlIHdvcmQgKGV4Y2VwdCBmb3IgZmlyc3Qgd29yZCBpbiBsaW5lKVxuICAgICAgICBpZiAod29yZEluZGV4ID4gMCkge1xuICAgICAgICAgIGNvbnN0IHNwYWNlV2lkdGggPSBjaGFyV2lkdGhDYWNoZS5yZWd1bGFyLmdldCgnICcpO1xuICAgICAgICAgIGN1cnJlbnRYICs9IHNwYWNlV2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFJlbmRlciB3b3JkXG4gICAgICAgIGN0eC5maWxsVGV4dCh3b3JkLnRleHQsIGN1cnJlbnRYLCBsaW5lWSk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgWCBwb3NpdGlvbiBmb3IgbmV4dCB3b3JkXG4gICAgICAgIGNvbnN0IHdvcmRXaWR0aCA9IFRleHRQcm9jZXNzaW5nU2VydmljZS5jYWxjdWxhdGVXb3JkV2lkdGgod29yZCwgY2hhcldpZHRoQ2FjaGUpO1xuICAgICAgICBjdXJyZW50WCArPSB3b3JkV2lkdGg7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZFRleHRTaGFkb3coY3R4KSB7XG4gICAgY3R4LnNoYWRvd0NvbG9yID0gVEVYVF9TSEFET1cuQ09MT1I7XG4gICAgY3R4LnNoYWRvd0JsdXIgPSBURVhUX1NIQURPVy5CTFVSO1xuICAgIGN0eC5zaGFkb3dPZmZzZXRYID0gVEVYVF9TSEFET1cuT0ZGU0VUX1g7XG4gICAgY3R4LnNoYWRvd09mZnNldFkgPSBURVhUX1NIQURPVy5PRkZTRVRfWTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBJbWFnZUdlbmVyYXRvcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/../backend/services/image-generator.js\n");

/***/ }),

/***/ "(api)/../backend/services/template-service.js":
/*!***********************************************!*\
  !*** ../backend/services/template-service.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/constants/index.js */ \"(api)/../shared/constants/index.js\");\n// Template service for managing template configurations\n\n\nclass TemplateService {\n  /**\n   * Get template configuration by name\n   * @param {string} templateName - The template identifier\n   * @returns {Object} Template configuration object\n   */\n  static getTemplateConfig(templateName) {\n    return _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.TEMPLATES[templateName] || _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.TEMPLATES.template1;\n  }\n\n  /**\n   * Get all available templates for UI selection\n   * @returns {Array} Array of template objects with value and label\n   */\n  static getAllTemplates() {\n    return Object.entries(_shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.TEMPLATES).map(([key, config]) => ({\n      value: key,\n      label: config.label\n    }));\n  }\n\n  /**\n   * Get template file name by template identifier\n   * @param {string} templateName - The template identifier\n   * @returns {string} Template file name\n   */\n  static getTemplateFileName(templateName) {\n    const config = this.getTemplateConfig(templateName);\n    return config.file;\n  }\n\n  /**\n   * Check if template exists\n   * @param {string} templateName - The template identifier\n   * @returns {boolean} True if template exists\n   */\n  static templateExists(templateName) {\n    return templateName in _shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.TEMPLATES;\n  }\n\n  /**\n   * Get template mapping for image generator\n   * @returns {Object} Template name to file name mapping\n   */\n  static getTemplateMapping() {\n    const mapping = {};\n    Object.entries(_shared_constants_index_js__WEBPACK_IMPORTED_MODULE_0__.TEMPLATES).forEach(([key, config]) => {\n      mapping[key] = config.file;\n    });\n    return mapping;\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TemplateService);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi4vYmFja2VuZC9zZXJ2aWNlcy90ZW1wbGF0ZS1zZXJ2aWNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDNEQ7O0FBRTVEO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBLFdBQVcsaUVBQVMsa0JBQWtCLGlFQUFTO0FBQy9DOztBQUVBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBLDBCQUEwQixpRUFBUztBQUNuQztBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBLDJCQUEyQixpRUFBUztBQUNwQzs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixpRUFBUztBQUM1QjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUEsaUVBQWUsZUFBZSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL2JhY2tlbmQvc2VydmljZXMvdGVtcGxhdGUtc2VydmljZS5qcz9lYjYwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRlbXBsYXRlIHNlcnZpY2UgZm9yIG1hbmFnaW5nIHRlbXBsYXRlIGNvbmZpZ3VyYXRpb25zXG5pbXBvcnQgeyBURU1QTEFURVMgfSBmcm9tICcuLi8uLi9zaGFyZWQvY29uc3RhbnRzL2luZGV4LmpzJztcblxuY2xhc3MgVGVtcGxhdGVTZXJ2aWNlIHtcbiAgLyoqXG4gICAqIEdldCB0ZW1wbGF0ZSBjb25maWd1cmF0aW9uIGJ5IG5hbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRlbXBsYXRlTmFtZSAtIFRoZSB0ZW1wbGF0ZSBpZGVudGlmaWVyXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFRlbXBsYXRlIGNvbmZpZ3VyYXRpb24gb2JqZWN0XG4gICAqL1xuICBzdGF0aWMgZ2V0VGVtcGxhdGVDb25maWcodGVtcGxhdGVOYW1lKSB7XG4gICAgcmV0dXJuIFRFTVBMQVRFU1t0ZW1wbGF0ZU5hbWVdIHx8IFRFTVBMQVRFUy50ZW1wbGF0ZTE7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBhdmFpbGFibGUgdGVtcGxhdGVzIGZvciBVSSBzZWxlY3Rpb25cbiAgICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiB0ZW1wbGF0ZSBvYmplY3RzIHdpdGggdmFsdWUgYW5kIGxhYmVsXG4gICAqL1xuICBzdGF0aWMgZ2V0QWxsVGVtcGxhdGVzKCkge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhURU1QTEFURVMpLm1hcCgoW2tleSwgY29uZmlnXSkgPT4gKHtcbiAgICAgIHZhbHVlOiBrZXksXG4gICAgICBsYWJlbDogY29uZmlnLmxhYmVsXG4gICAgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0ZW1wbGF0ZSBmaWxlIG5hbWUgYnkgdGVtcGxhdGUgaWRlbnRpZmllclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGVOYW1lIC0gVGhlIHRlbXBsYXRlIGlkZW50aWZpZXJcbiAgICogQHJldHVybnMge3N0cmluZ30gVGVtcGxhdGUgZmlsZSBuYW1lXG4gICAqL1xuICBzdGF0aWMgZ2V0VGVtcGxhdGVGaWxlTmFtZSh0ZW1wbGF0ZU5hbWUpIHtcbiAgICBjb25zdCBjb25maWcgPSB0aGlzLmdldFRlbXBsYXRlQ29uZmlnKHRlbXBsYXRlTmFtZSk7XG4gICAgcmV0dXJuIGNvbmZpZy5maWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRlbXBsYXRlIGV4aXN0c1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGVOYW1lIC0gVGhlIHRlbXBsYXRlIGlkZW50aWZpZXJcbiAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGVtcGxhdGUgZXhpc3RzXG4gICAqL1xuICBzdGF0aWMgdGVtcGxhdGVFeGlzdHModGVtcGxhdGVOYW1lKSB7XG4gICAgcmV0dXJuIHRlbXBsYXRlTmFtZSBpbiBURU1QTEFURVM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRlbXBsYXRlIG1hcHBpbmcgZm9yIGltYWdlIGdlbmVyYXRvclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUZW1wbGF0ZSBuYW1lIHRvIGZpbGUgbmFtZSBtYXBwaW5nXG4gICAqL1xuICBzdGF0aWMgZ2V0VGVtcGxhdGVNYXBwaW5nKCkge1xuICAgIGNvbnN0IG1hcHBpbmcgPSB7fTtcbiAgICBPYmplY3QuZW50cmllcyhURU1QTEFURVMpLmZvckVhY2goKFtrZXksIGNvbmZpZ10pID0+IHtcbiAgICAgIG1hcHBpbmdba2V5XSA9IGNvbmZpZy5maWxlO1xuICAgIH0pO1xuICAgIHJldHVybiBtYXBwaW5nO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRlbXBsYXRlU2VydmljZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/../backend/services/template-service.js\n");

/***/ }),

/***/ "(api)/../backend/services/text-processing-service.js":
/*!******************************************************!*\
  !*** ../backend/services/text-processing-service.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_character_width_cache_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/character-width-cache.js */ \"(api)/../backend/utils/character-width-cache.js\");\n// Text processing service for handling text parsing and formatting\n\n\nclass TextProcessingService {\n  /**\n   * Parse text for **bold** formatting and split into words\n   * @param {string} text - Input text with **bold** markers\n   * @returns {Array} Array of word objects with text and bold properties\n   */\n  static parseBoldText(text) {\n    const words = [];\n    const regex = /\\*\\*(.*?)\\*\\*/g;\n    let lastIndex = 0;\n    let match;\n    \n    while ((match = regex.exec(text)) !== null) {\n      // Add words before bold\n      if (match.index > lastIndex) {\n        const textBefore = text.slice(lastIndex, match.index);\n        const wordsBefore = this._splitIntoWords(textBefore);\n        words.push(...wordsBefore.map(word => ({ text: word, bold: false })));\n      }\n      \n      // Add bold words\n      const boldWords = this._splitIntoWords(match[1]);\n      words.push(...boldWords.map(word => ({ text: word, bold: true })));\n      \n      lastIndex = match.index + match[0].length;\n    }\n    \n    // Add remaining words\n    if (lastIndex < text.length) {\n      const remainingText = text.slice(lastIndex);\n      const remainingWords = this._splitIntoWords(remainingText);\n      words.push(...remainingWords.map(word => ({ text: word, bold: false })));\n    }\n    \n    return words;\n  }\n\n  /**\n   * Split text into words, filtering out empty strings\n   * @param {string} text - Text to split\n   * @returns {Array} Array of non-empty words\n   * @private\n   */\n  static _splitIntoWords(text) {\n    return text.split(' ').filter(w => w.length > 0);\n  }\n\n  /**\n   * Wrap words to lines based on maximum width\n   * @param {Array} words - Array of word objects\n   * @param {number} maxWidth - Maximum line width in pixels\n   * @param {Object} config - Typography configuration\n   * @returns {Array} Array of lines, each containing word objects\n   */\n  static wrapTextToLines(words, maxWidth, config) {\n    const charWidthCache = (0,_utils_character_width_cache_js__WEBPACK_IMPORTED_MODULE_0__.getCharacterWidthCache)();\n    const lines = [];\n    let currentLine = [];\n    let remainingWidth = maxWidth;\n    \n    for (const word of words) {\n      const wordWidth = (0,_utils_character_width_cache_js__WEBPACK_IMPORTED_MODULE_0__.calculateWordWidth)(word, charWidthCache);\n      const spaceWidth = charWidthCache.regular.get(' ');\n      \n      if (wordWidth <= remainingWidth) {\n        // Add word to current line\n        currentLine.push(word);\n        remainingWidth -= wordWidth;\n        \n        // Add space if there's room and not last word\n        if (remainingWidth >= spaceWidth) {\n          remainingWidth -= spaceWidth;\n        }\n      } else {\n        // Start new line\n        if (currentLine.length > 0) {\n          lines.push(currentLine);\n        }\n        currentLine = [word];\n        remainingWidth = maxWidth - wordWidth;\n        \n        // Add space if there's room\n        if (remainingWidth >= spaceWidth) {\n          remainingWidth -= spaceWidth;\n        }\n      }\n    }\n    \n    // Add final line\n    if (currentLine.length > 0) {\n      lines.push(currentLine);\n    }\n    \n    return lines;\n  }\n\n  /**\n   * Calculate text positioning for centering\n   * @param {Array} lines - Array of lines to position\n   * @param {number} canvasWidth - Canvas width\n   * @param {Object} config - Typography configuration\n   * @returns {Object} Positioning information\n   */\n  static calculateTextPositioning(lines, canvasWidth, config) {\n    const charWidthCache = (0,_utils_character_width_cache_js__WEBPACK_IMPORTED_MODULE_0__.getCharacterWidthCache)();\n    const lineHeight = config.font.size * config.font.lineHeight;\n    const maxWidth = canvasWidth * config.layout.maxWidth;\n    const x = canvasWidth / 2;\n    const y = canvasWidth * config.layout.marginTop;\n    \n    // Calculate line positions\n    const linePositions = lines.map((line, lineIndex) => {\n      const lineWidth = (0,_utils_character_width_cache_js__WEBPACK_IMPORTED_MODULE_0__.calculateLineWidth)(line, charWidthCache);\n      const lineStartX = x - lineWidth / 2;\n      const lineY = y - (lines.length - 1) * lineHeight / 2 + lineIndex * lineHeight;\n      \n      return {\n        line,\n        lineStartX,\n        lineY,\n        lineWidth\n      };\n    });\n    \n    return {\n      linePositions,\n      lineHeight,\n      maxWidth\n    };\n  }\n\n  /**\n   * Parse text with line breaks (--- separator)\n   * @param {string} text - Input text with --- separators\n   * @returns {Array} Array of text segments\n   */\n  static parseTextWithLineBreaks(text) {\n    return text.split('---').map(segment => segment.trim()).filter(segment => segment.length > 0);\n  }\n\n  /**\n   * Calculate width of a word using the character width cache\n   * @param {Object} word - Word object with text and bold properties\n   * @param {Object} charWidthCache - Character width cache\n   * @returns {number} Word width in pixels\n   */\n  static calculateWordWidth(word, charWidthCache) {\n    return (0,_utils_character_width_cache_js__WEBPACK_IMPORTED_MODULE_0__.calculateWordWidth)(word, charWidthCache);\n  }\n\n  /**\n   * Calculate total width of a line of words\n   * @param {Array} words - Array of word objects\n   * @param {Object} charWidthCache - Character width cache\n   * @returns {number} Total line width in pixels\n   */\n  static calculateLineWidth(words, charWidthCache) {\n    return (0,_utils_character_width_cache_js__WEBPACK_IMPORTED_MODULE_0__.calculateLineWidth)(words, charWidthCache);\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TextProcessingService);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi4vYmFja2VuZC9zZXJ2aWNlcy90ZXh0LXByb2Nlc3Npbmctc2VydmljZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ21IOztBQUVuSDtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCx5QkFBeUI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsd0JBQXdCO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QseUJBQXlCO0FBQzNFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0EsMkJBQTJCLHVGQUFzQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1GQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQSwyQkFBMkIsdUZBQXNCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1GQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxXQUFXLG1GQUFrQjtBQUM3Qjs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsUUFBUTtBQUNyQixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBLFdBQVcsbUZBQWtCO0FBQzdCO0FBQ0E7O0FBRUEsaUVBQWUscUJBQXFCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vYmFja2VuZC9zZXJ2aWNlcy90ZXh0LXByb2Nlc3Npbmctc2VydmljZS5qcz8zMWUxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRleHQgcHJvY2Vzc2luZyBzZXJ2aWNlIGZvciBoYW5kbGluZyB0ZXh0IHBhcnNpbmcgYW5kIGZvcm1hdHRpbmdcbmltcG9ydCB7IGdldENoYXJhY3RlcldpZHRoQ2FjaGUsIGNhbGN1bGF0ZVdvcmRXaWR0aCwgY2FsY3VsYXRlTGluZVdpZHRoIH0gZnJvbSAnLi4vdXRpbHMvY2hhcmFjdGVyLXdpZHRoLWNhY2hlLmpzJztcblxuY2xhc3MgVGV4dFByb2Nlc3NpbmdTZXJ2aWNlIHtcbiAgLyoqXG4gICAqIFBhcnNlIHRleHQgZm9yICoqYm9sZCoqIGZvcm1hdHRpbmcgYW5kIHNwbGl0IGludG8gd29yZHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBJbnB1dCB0ZXh0IHdpdGggKipib2xkKiogbWFya2Vyc1xuICAgKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IG9mIHdvcmQgb2JqZWN0cyB3aXRoIHRleHQgYW5kIGJvbGQgcHJvcGVydGllc1xuICAgKi9cbiAgc3RhdGljIHBhcnNlQm9sZFRleHQodGV4dCkge1xuICAgIGNvbnN0IHdvcmRzID0gW107XG4gICAgY29uc3QgcmVnZXggPSAvXFwqXFwqKC4qPylcXCpcXCovZztcbiAgICBsZXQgbGFzdEluZGV4ID0gMDtcbiAgICBsZXQgbWF0Y2g7XG4gICAgXG4gICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4LmV4ZWModGV4dCkpICE9PSBudWxsKSB7XG4gICAgICAvLyBBZGQgd29yZHMgYmVmb3JlIGJvbGRcbiAgICAgIGlmIChtYXRjaC5pbmRleCA+IGxhc3RJbmRleCkge1xuICAgICAgICBjb25zdCB0ZXh0QmVmb3JlID0gdGV4dC5zbGljZShsYXN0SW5kZXgsIG1hdGNoLmluZGV4KTtcbiAgICAgICAgY29uc3Qgd29yZHNCZWZvcmUgPSB0aGlzLl9zcGxpdEludG9Xb3Jkcyh0ZXh0QmVmb3JlKTtcbiAgICAgICAgd29yZHMucHVzaCguLi53b3Jkc0JlZm9yZS5tYXAod29yZCA9PiAoeyB0ZXh0OiB3b3JkLCBib2xkOiBmYWxzZSB9KSkpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBZGQgYm9sZCB3b3Jkc1xuICAgICAgY29uc3QgYm9sZFdvcmRzID0gdGhpcy5fc3BsaXRJbnRvV29yZHMobWF0Y2hbMV0pO1xuICAgICAgd29yZHMucHVzaCguLi5ib2xkV29yZHMubWFwKHdvcmQgPT4gKHsgdGV4dDogd29yZCwgYm9sZDogdHJ1ZSB9KSkpO1xuICAgICAgXG4gICAgICBsYXN0SW5kZXggPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcbiAgICB9XG4gICAgXG4gICAgLy8gQWRkIHJlbWFpbmluZyB3b3Jkc1xuICAgIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuICAgICAgY29uc3QgcmVtYWluaW5nVGV4dCA9IHRleHQuc2xpY2UobGFzdEluZGV4KTtcbiAgICAgIGNvbnN0IHJlbWFpbmluZ1dvcmRzID0gdGhpcy5fc3BsaXRJbnRvV29yZHMocmVtYWluaW5nVGV4dCk7XG4gICAgICB3b3Jkcy5wdXNoKC4uLnJlbWFpbmluZ1dvcmRzLm1hcCh3b3JkID0+ICh7IHRleHQ6IHdvcmQsIGJvbGQ6IGZhbHNlIH0pKSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB3b3JkcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGxpdCB0ZXh0IGludG8gd29yZHMsIGZpbHRlcmluZyBvdXQgZW1wdHkgc3RyaW5nc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRleHQgdG8gc3BsaXRcbiAgICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiBub24tZW1wdHkgd29yZHNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBfc3BsaXRJbnRvV29yZHModGV4dCkge1xuICAgIHJldHVybiB0ZXh0LnNwbGl0KCcgJykuZmlsdGVyKHcgPT4gdy5sZW5ndGggPiAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXcmFwIHdvcmRzIHRvIGxpbmVzIGJhc2VkIG9uIG1heGltdW0gd2lkdGhcbiAgICogQHBhcmFtIHtBcnJheX0gd29yZHMgLSBBcnJheSBvZiB3b3JkIG9iamVjdHNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heFdpZHRoIC0gTWF4aW11bSBsaW5lIHdpZHRoIGluIHBpeGVsc1xuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIC0gVHlwb2dyYXBoeSBjb25maWd1cmF0aW9uXG4gICAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgb2YgbGluZXMsIGVhY2ggY29udGFpbmluZyB3b3JkIG9iamVjdHNcbiAgICovXG4gIHN0YXRpYyB3cmFwVGV4dFRvTGluZXMod29yZHMsIG1heFdpZHRoLCBjb25maWcpIHtcbiAgICBjb25zdCBjaGFyV2lkdGhDYWNoZSA9IGdldENoYXJhY3RlcldpZHRoQ2FjaGUoKTtcbiAgICBjb25zdCBsaW5lcyA9IFtdO1xuICAgIGxldCBjdXJyZW50TGluZSA9IFtdO1xuICAgIGxldCByZW1haW5pbmdXaWR0aCA9IG1heFdpZHRoO1xuICAgIFxuICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgY29uc3Qgd29yZFdpZHRoID0gY2FsY3VsYXRlV29yZFdpZHRoKHdvcmQsIGNoYXJXaWR0aENhY2hlKTtcbiAgICAgIGNvbnN0IHNwYWNlV2lkdGggPSBjaGFyV2lkdGhDYWNoZS5yZWd1bGFyLmdldCgnICcpO1xuICAgICAgXG4gICAgICBpZiAod29yZFdpZHRoIDw9IHJlbWFpbmluZ1dpZHRoKSB7XG4gICAgICAgIC8vIEFkZCB3b3JkIHRvIGN1cnJlbnQgbGluZVxuICAgICAgICBjdXJyZW50TGluZS5wdXNoKHdvcmQpO1xuICAgICAgICByZW1haW5pbmdXaWR0aCAtPSB3b3JkV2lkdGg7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgc3BhY2UgaWYgdGhlcmUncyByb29tIGFuZCBub3QgbGFzdCB3b3JkXG4gICAgICAgIGlmIChyZW1haW5pbmdXaWR0aCA+PSBzcGFjZVdpZHRoKSB7XG4gICAgICAgICAgcmVtYWluaW5nV2lkdGggLT0gc3BhY2VXaWR0aDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU3RhcnQgbmV3IGxpbmVcbiAgICAgICAgaWYgKGN1cnJlbnRMaW5lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGN1cnJlbnRMaW5lKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50TGluZSA9IFt3b3JkXTtcbiAgICAgICAgcmVtYWluaW5nV2lkdGggPSBtYXhXaWR0aCAtIHdvcmRXaWR0aDtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBzcGFjZSBpZiB0aGVyZSdzIHJvb21cbiAgICAgICAgaWYgKHJlbWFpbmluZ1dpZHRoID49IHNwYWNlV2lkdGgpIHtcbiAgICAgICAgICByZW1haW5pbmdXaWR0aCAtPSBzcGFjZVdpZHRoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCBmaW5hbCBsaW5lXG4gICAgaWYgKGN1cnJlbnRMaW5lLmxlbmd0aCA+IDApIHtcbiAgICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRleHQgcG9zaXRpb25pbmcgZm9yIGNlbnRlcmluZ1xuICAgKiBAcGFyYW0ge0FycmF5fSBsaW5lcyAtIEFycmF5IG9mIGxpbmVzIHRvIHBvc2l0aW9uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjYW52YXNXaWR0aCAtIENhbnZhcyB3aWR0aFxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIC0gVHlwb2dyYXBoeSBjb25maWd1cmF0aW9uXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFBvc2l0aW9uaW5nIGluZm9ybWF0aW9uXG4gICAqL1xuICBzdGF0aWMgY2FsY3VsYXRlVGV4dFBvc2l0aW9uaW5nKGxpbmVzLCBjYW52YXNXaWR0aCwgY29uZmlnKSB7XG4gICAgY29uc3QgY2hhcldpZHRoQ2FjaGUgPSBnZXRDaGFyYWN0ZXJXaWR0aENhY2hlKCk7XG4gICAgY29uc3QgbGluZUhlaWdodCA9IGNvbmZpZy5mb250LnNpemUgKiBjb25maWcuZm9udC5saW5lSGVpZ2h0O1xuICAgIGNvbnN0IG1heFdpZHRoID0gY2FudmFzV2lkdGggKiBjb25maWcubGF5b3V0Lm1heFdpZHRoO1xuICAgIGNvbnN0IHggPSBjYW52YXNXaWR0aCAvIDI7XG4gICAgY29uc3QgeSA9IGNhbnZhc1dpZHRoICogY29uZmlnLmxheW91dC5tYXJnaW5Ub3A7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIGxpbmUgcG9zaXRpb25zXG4gICAgY29uc3QgbGluZVBvc2l0aW9ucyA9IGxpbmVzLm1hcCgobGluZSwgbGluZUluZGV4KSA9PiB7XG4gICAgICBjb25zdCBsaW5lV2lkdGggPSBjYWxjdWxhdGVMaW5lV2lkdGgobGluZSwgY2hhcldpZHRoQ2FjaGUpO1xuICAgICAgY29uc3QgbGluZVN0YXJ0WCA9IHggLSBsaW5lV2lkdGggLyAyO1xuICAgICAgY29uc3QgbGluZVkgPSB5IC0gKGxpbmVzLmxlbmd0aCAtIDEpICogbGluZUhlaWdodCAvIDIgKyBsaW5lSW5kZXggKiBsaW5lSGVpZ2h0O1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBsaW5lLFxuICAgICAgICBsaW5lU3RhcnRYLFxuICAgICAgICBsaW5lWSxcbiAgICAgICAgbGluZVdpZHRoXG4gICAgICB9O1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBsaW5lUG9zaXRpb25zLFxuICAgICAgbGluZUhlaWdodCxcbiAgICAgIG1heFdpZHRoXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSB0ZXh0IHdpdGggbGluZSBicmVha3MgKC0tLSBzZXBhcmF0b3IpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gSW5wdXQgdGV4dCB3aXRoIC0tLSBzZXBhcmF0b3JzXG4gICAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgb2YgdGV4dCBzZWdtZW50c1xuICAgKi9cbiAgc3RhdGljIHBhcnNlVGV4dFdpdGhMaW5lQnJlYWtzKHRleHQpIHtcbiAgICByZXR1cm4gdGV4dC5zcGxpdCgnLS0tJykubWFwKHNlZ21lbnQgPT4gc2VnbWVudC50cmltKCkpLmZpbHRlcihzZWdtZW50ID0+IHNlZ21lbnQubGVuZ3RoID4gMCk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHdpZHRoIG9mIGEgd29yZCB1c2luZyB0aGUgY2hhcmFjdGVyIHdpZHRoIGNhY2hlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB3b3JkIC0gV29yZCBvYmplY3Qgd2l0aCB0ZXh0IGFuZCBib2xkIHByb3BlcnRpZXNcbiAgICogQHBhcmFtIHtPYmplY3R9IGNoYXJXaWR0aENhY2hlIC0gQ2hhcmFjdGVyIHdpZHRoIGNhY2hlXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFdvcmQgd2lkdGggaW4gcGl4ZWxzXG4gICAqL1xuICBzdGF0aWMgY2FsY3VsYXRlV29yZFdpZHRoKHdvcmQsIGNoYXJXaWR0aENhY2hlKSB7XG4gICAgcmV0dXJuIGNhbGN1bGF0ZVdvcmRXaWR0aCh3b3JkLCBjaGFyV2lkdGhDYWNoZSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRvdGFsIHdpZHRoIG9mIGEgbGluZSBvZiB3b3Jkc1xuICAgKiBAcGFyYW0ge0FycmF5fSB3b3JkcyAtIEFycmF5IG9mIHdvcmQgb2JqZWN0c1xuICAgKiBAcGFyYW0ge09iamVjdH0gY2hhcldpZHRoQ2FjaGUgLSBDaGFyYWN0ZXIgd2lkdGggY2FjaGVcbiAgICogQHJldHVybnMge251bWJlcn0gVG90YWwgbGluZSB3aWR0aCBpbiBwaXhlbHNcbiAgICovXG4gIHN0YXRpYyBjYWxjdWxhdGVMaW5lV2lkdGgod29yZHMsIGNoYXJXaWR0aENhY2hlKSB7XG4gICAgcmV0dXJuIGNhbGN1bGF0ZUxpbmVXaWR0aCh3b3JkcywgY2hhcldpZHRoQ2FjaGUpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRleHRQcm9jZXNzaW5nU2VydmljZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/../backend/services/text-processing-service.js\n");

/***/ }),

/***/ "(api)/../backend/utils/character-width-cache.js":
/*!*************************************************!*\
  !*** ../backend/utils/character-width-cache.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateLineWidth: () => (/* binding */ calculateLineWidth),\n/* harmony export */   calculateWordWidth: () => (/* binding */ calculateWordWidth),\n/* harmony export */   getCharacterWidthCache: () => (/* binding */ getCharacterWidthCache)\n/* harmony export */ });\n/* harmony import */ var canvas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! canvas */ \"canvas\");\n/* harmony import */ var canvas__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(canvas__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _config_typography_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config/typography.js */ \"(api)/../backend/config/typography.js\");\n\n\n\n// Pre-computed character width cache for template1\n// This is created once at module load time for optimal performance\nconst CHARACTER_WIDTH_CACHE = (() => {\n  const config = _config_typography_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].template1;\n  \n  // Create a temporary canvas to measure character widths\n  const tempCanvas = (0,canvas__WEBPACK_IMPORTED_MODULE_0__.createCanvas)(1, 1);\n  const regularCtx = tempCanvas.getContext('2d');\n  const boldCtx = tempCanvas.getContext('2d');\n  \n  // Set up fonts\n  regularCtx.font = `${config.font.size}px \"${config.font.family}\", \"CrimsonText Regular\", serif`;\n  boldCtx.font = `${config.boldFont.size}px \"${config.boldFont.family}\", \"CrimsonText Regular\", serif`;\n  \n  // Create character width maps\n  const regularCache = new Map();\n  const boldCache = new Map();\n  \n  // Common characters to measure\n  const characters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 .,:;!?\\'\"()-_[]{}@#$%^&*+=<>/\\\\|`~';\n  \n  for (const char of characters) {\n    regularCache.set(char, regularCtx.measureText(char).width);\n    boldCache.set(char, boldCtx.measureText(char).width);\n  }\n  \n  return { regular: regularCache, bold: boldCache };\n})();\n\n// Fallback canvas for measuring uncached characters\nconst FALLBACK_CANVAS = (0,canvas__WEBPACK_IMPORTED_MODULE_0__.createCanvas)(1, 1);\nconst FALLBACK_CTX = FALLBACK_CANVAS.getContext('2d');\n\n// Font configurations for fallback measurements\nconst FONT_CONFIGS = {\n  regular: {\n    family: 'Jost Medium',\n    size: 42\n  },\n  bold: {\n    family: 'Jost Bold',\n    size: 42\n  }\n};\n\n/**\n * Get the pre-computed character width cache\n * @returns {Object} Character width cache with regular and bold maps\n */\nfunction getCharacterWidthCache() {\n  return CHARACTER_WIDTH_CACHE;\n}\n\n/**\n * Calculate width of a word using the character width cache\n * @param {Object} word - Word object with text and bold properties\n * @param {Object} charWidthCache - Character width cache\n * @returns {number} Word width in pixels\n */\nfunction calculateWordWidth(word, charWidthCache) {\n  const cache = word.bold ? charWidthCache.bold : charWidthCache.regular;\n  let totalWidth = 0;\n  \n  for (const char of word.text) {\n    const charWidth = cache.get(char);\n    if (charWidth !== undefined) {\n      totalWidth += charWidth;\n    } else {\n      // Fallback: measure character if not in cache\n      const fontConfig = word.bold ? FONT_CONFIGS.bold : FONT_CONFIGS.regular;\n      FALLBACK_CTX.font = `${fontConfig.size}px \"${fontConfig.family}\", \"CrimsonText Regular\", serif`;\n      totalWidth += FALLBACK_CTX.measureText(char).width;\n    }\n  }\n  \n  return totalWidth;\n}\n\n/**\n * Calculate total width of a line of words\n * @param {Array} words - Array of word objects\n * @param {Object} charWidthCache - Character width cache\n * @returns {number} Total line width in pixels\n */\nfunction calculateLineWidth(words, charWidthCache) {\n  let totalWidth = 0;\n  \n  for (let i = 0; i < words.length; i++) {\n    const word = words[i];\n    totalWidth += calculateWordWidth(word, charWidthCache);\n    \n    // Add space width between words (except for last word)\n    if (i < words.length - 1) {\n      totalWidth += charWidthCache.regular.get(' ');\n    }\n  }\n  \n  return totalWidth;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi4vYmFja2VuZC91dGlscy9jaGFyYWN0ZXItd2lkdGgtY2FjaGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXNDO0FBQ2lCOztBQUV2RDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdUVBQTBCO0FBQzNDO0FBQ0E7QUFDQSxxQkFBcUIsb0RBQVk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsaUJBQWlCLE1BQU0sbUJBQW1CO0FBQ2pFLG9CQUFvQixxQkFBcUIsTUFBTSx1QkFBdUI7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUZBQXlGLGFBQWE7QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLENBQUM7O0FBRUQ7QUFDQSx3QkFBd0Isb0RBQVk7QUFDcEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsNkJBQTZCLGdCQUFnQixNQUFNLGtCQUFrQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFFBQVE7QUFDbkIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQU1FIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL2JhY2tlbmQvdXRpbHMvY2hhcmFjdGVyLXdpZHRoLWNhY2hlLmpzP2RjMzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2FudmFzIH0gZnJvbSAnY2FudmFzJztcbmltcG9ydCB0eXBvZ3JhcGh5Q29uZmlnIGZyb20gJy4uL2NvbmZpZy90eXBvZ3JhcGh5LmpzJztcblxuLy8gUHJlLWNvbXB1dGVkIGNoYXJhY3RlciB3aWR0aCBjYWNoZSBmb3IgdGVtcGxhdGUxXG4vLyBUaGlzIGlzIGNyZWF0ZWQgb25jZSBhdCBtb2R1bGUgbG9hZCB0aW1lIGZvciBvcHRpbWFsIHBlcmZvcm1hbmNlXG5jb25zdCBDSEFSQUNURVJfV0lEVEhfQ0FDSEUgPSAoKCkgPT4ge1xuICBjb25zdCBjb25maWcgPSB0eXBvZ3JhcGh5Q29uZmlnLnRlbXBsYXRlMTtcbiAgXG4gIC8vIENyZWF0ZSBhIHRlbXBvcmFyeSBjYW52YXMgdG8gbWVhc3VyZSBjaGFyYWN0ZXIgd2lkdGhzXG4gIGNvbnN0IHRlbXBDYW52YXMgPSBjcmVhdGVDYW52YXMoMSwgMSk7XG4gIGNvbnN0IHJlZ3VsYXJDdHggPSB0ZW1wQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gIGNvbnN0IGJvbGRDdHggPSB0ZW1wQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gIFxuICAvLyBTZXQgdXAgZm9udHNcbiAgcmVndWxhckN0eC5mb250ID0gYCR7Y29uZmlnLmZvbnQuc2l6ZX1weCBcIiR7Y29uZmlnLmZvbnQuZmFtaWx5fVwiLCBcIkNyaW1zb25UZXh0IFJlZ3VsYXJcIiwgc2VyaWZgO1xuICBib2xkQ3R4LmZvbnQgPSBgJHtjb25maWcuYm9sZEZvbnQuc2l6ZX1weCBcIiR7Y29uZmlnLmJvbGRGb250LmZhbWlseX1cIiwgXCJDcmltc29uVGV4dCBSZWd1bGFyXCIsIHNlcmlmYDtcbiAgXG4gIC8vIENyZWF0ZSBjaGFyYWN0ZXIgd2lkdGggbWFwc1xuICBjb25zdCByZWd1bGFyQ2FjaGUgPSBuZXcgTWFwKCk7XG4gIGNvbnN0IGJvbGRDYWNoZSA9IG5ldyBNYXAoKTtcbiAgXG4gIC8vIENvbW1vbiBjaGFyYWN0ZXJzIHRvIG1lYXN1cmVcbiAgY29uc3QgY2hhcmFjdGVycyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMDEyMzQ1Njc4OSAuLDo7IT9cXCdcIigpLV9bXXt9QCMkJV4mKis9PD4vXFxcXHxgfic7XG4gIFxuICBmb3IgKGNvbnN0IGNoYXIgb2YgY2hhcmFjdGVycykge1xuICAgIHJlZ3VsYXJDYWNoZS5zZXQoY2hhciwgcmVndWxhckN0eC5tZWFzdXJlVGV4dChjaGFyKS53aWR0aCk7XG4gICAgYm9sZENhY2hlLnNldChjaGFyLCBib2xkQ3R4Lm1lYXN1cmVUZXh0KGNoYXIpLndpZHRoKTtcbiAgfVxuICBcbiAgcmV0dXJuIHsgcmVndWxhcjogcmVndWxhckNhY2hlLCBib2xkOiBib2xkQ2FjaGUgfTtcbn0pKCk7XG5cbi8vIEZhbGxiYWNrIGNhbnZhcyBmb3IgbWVhc3VyaW5nIHVuY2FjaGVkIGNoYXJhY3RlcnNcbmNvbnN0IEZBTExCQUNLX0NBTlZBUyA9IGNyZWF0ZUNhbnZhcygxLCAxKTtcbmNvbnN0IEZBTExCQUNLX0NUWCA9IEZBTExCQUNLX0NBTlZBUy5nZXRDb250ZXh0KCcyZCcpO1xuXG4vLyBGb250IGNvbmZpZ3VyYXRpb25zIGZvciBmYWxsYmFjayBtZWFzdXJlbWVudHNcbmNvbnN0IEZPTlRfQ09ORklHUyA9IHtcbiAgcmVndWxhcjoge1xuICAgIGZhbWlseTogJ0pvc3QgTWVkaXVtJyxcbiAgICBzaXplOiA0MlxuICB9LFxuICBib2xkOiB7XG4gICAgZmFtaWx5OiAnSm9zdCBCb2xkJyxcbiAgICBzaXplOiA0MlxuICB9XG59O1xuXG4vKipcbiAqIEdldCB0aGUgcHJlLWNvbXB1dGVkIGNoYXJhY3RlciB3aWR0aCBjYWNoZVxuICogQHJldHVybnMge09iamVjdH0gQ2hhcmFjdGVyIHdpZHRoIGNhY2hlIHdpdGggcmVndWxhciBhbmQgYm9sZCBtYXBzXG4gKi9cbmZ1bmN0aW9uIGdldENoYXJhY3RlcldpZHRoQ2FjaGUoKSB7XG4gIHJldHVybiBDSEFSQUNURVJfV0lEVEhfQ0FDSEU7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIHdpZHRoIG9mIGEgd29yZCB1c2luZyB0aGUgY2hhcmFjdGVyIHdpZHRoIGNhY2hlXG4gKiBAcGFyYW0ge09iamVjdH0gd29yZCAtIFdvcmQgb2JqZWN0IHdpdGggdGV4dCBhbmQgYm9sZCBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge09iamVjdH0gY2hhcldpZHRoQ2FjaGUgLSBDaGFyYWN0ZXIgd2lkdGggY2FjaGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFdvcmQgd2lkdGggaW4gcGl4ZWxzXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZVdvcmRXaWR0aCh3b3JkLCBjaGFyV2lkdGhDYWNoZSkge1xuICBjb25zdCBjYWNoZSA9IHdvcmQuYm9sZCA/IGNoYXJXaWR0aENhY2hlLmJvbGQgOiBjaGFyV2lkdGhDYWNoZS5yZWd1bGFyO1xuICBsZXQgdG90YWxXaWR0aCA9IDA7XG4gIFxuICBmb3IgKGNvbnN0IGNoYXIgb2Ygd29yZC50ZXh0KSB7XG4gICAgY29uc3QgY2hhcldpZHRoID0gY2FjaGUuZ2V0KGNoYXIpO1xuICAgIGlmIChjaGFyV2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgdG90YWxXaWR0aCArPSBjaGFyV2lkdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrOiBtZWFzdXJlIGNoYXJhY3RlciBpZiBub3QgaW4gY2FjaGVcbiAgICAgIGNvbnN0IGZvbnRDb25maWcgPSB3b3JkLmJvbGQgPyBGT05UX0NPTkZJR1MuYm9sZCA6IEZPTlRfQ09ORklHUy5yZWd1bGFyO1xuICAgICAgRkFMTEJBQ0tfQ1RYLmZvbnQgPSBgJHtmb250Q29uZmlnLnNpemV9cHggXCIke2ZvbnRDb25maWcuZmFtaWx5fVwiLCBcIkNyaW1zb25UZXh0IFJlZ3VsYXJcIiwgc2VyaWZgO1xuICAgICAgdG90YWxXaWR0aCArPSBGQUxMQkFDS19DVFgubWVhc3VyZVRleHQoY2hhcikud2lkdGg7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gdG90YWxXaWR0aDtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgdG90YWwgd2lkdGggb2YgYSBsaW5lIG9mIHdvcmRzXG4gKiBAcGFyYW0ge0FycmF5fSB3b3JkcyAtIEFycmF5IG9mIHdvcmQgb2JqZWN0c1xuICogQHBhcmFtIHtPYmplY3R9IGNoYXJXaWR0aENhY2hlIC0gQ2hhcmFjdGVyIHdpZHRoIGNhY2hlXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBUb3RhbCBsaW5lIHdpZHRoIGluIHBpeGVsc1xuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVMaW5lV2lkdGgod29yZHMsIGNoYXJXaWR0aENhY2hlKSB7XG4gIGxldCB0b3RhbFdpZHRoID0gMDtcbiAgXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgd29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB3b3JkID0gd29yZHNbaV07XG4gICAgdG90YWxXaWR0aCArPSBjYWxjdWxhdGVXb3JkV2lkdGgod29yZCwgY2hhcldpZHRoQ2FjaGUpO1xuICAgIFxuICAgIC8vIEFkZCBzcGFjZSB3aWR0aCBiZXR3ZWVuIHdvcmRzIChleGNlcHQgZm9yIGxhc3Qgd29yZClcbiAgICBpZiAoaSA8IHdvcmRzLmxlbmd0aCAtIDEpIHtcbiAgICAgIHRvdGFsV2lkdGggKz0gY2hhcldpZHRoQ2FjaGUucmVndWxhci5nZXQoJyAnKTtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiB0b3RhbFdpZHRoO1xufVxuXG5leHBvcnQge1xuICBnZXRDaGFyYWN0ZXJXaWR0aENhY2hlLFxuICBjYWxjdWxhdGVXb3JkV2lkdGgsXG4gIGNhbGN1bGF0ZUxpbmVXaWR0aFxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/../backend/utils/character-width-cache.js\n");

/***/ }),

/***/ "(api)/../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-image&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenerate-image.js&middlewareConfigBase64=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************!*\
  !*** ../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-image&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenerate-image.js&middlewareConfigBase64=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/../node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/../node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/../node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_generate_image_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/generate-image.js */ \"(api)/./pages/api/generate-image.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_generate_image_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_generate_image_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/generate-image\",\n        pathname: \"/api/generate-image\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_generate_image_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1yb3V0ZS1sb2FkZXIvaW5kZXguanM/a2luZD1QQUdFU19BUEkmcGFnZT0lMkZhcGklMkZnZW5lcmF0ZS1pbWFnZSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGZ2VuZXJhdGUtaW1hZ2UuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDMEQ7QUFDMUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHlEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx5REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vP2YyY2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9nZW5lcmF0ZS1pbWFnZS5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dlbmVyYXRlLWltYWdlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ2VuZXJhdGUtaW1hZ2VcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-image&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenerate-image.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/generate-image.js":
/*!*************************************!*\
  !*** ./pages/api/generate-image.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _backend_services_image_generator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../backend/services/image-generator.js */ \"(api)/../backend/services/image-generator.js\");\n/* harmony import */ var _backend_errors_error_handler_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../backend/errors/error-handler.js */ \"(api)/../backend/errors/error-handler.js\");\n\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    try {\n        const { text, template = \"template1\" } = req.body;\n        // Validate input\n        (0,_backend_errors_error_handler_js__WEBPACK_IMPORTED_MODULE_1__.validateText)(text);\n        (0,_backend_errors_error_handler_js__WEBPACK_IMPORTED_MODULE_1__.validateTemplate)(template);\n        // Generate images\n        const imageGenerator = new _backend_services_image_generator_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n        const imageBuffers = await imageGenerator.generateImage(text, template);\n        // Convert all images to base64\n        const base64Images = imageBuffers.map((buffer, index)=>({\n                id: index + 1,\n                data: buffer.toString(\"base64\"),\n                mimeType: \"image/png\"\n            }));\n        res.status(200).json({\n            success: true,\n            message: `Generated ${imageBuffers.length} image(s)`,\n            imageCount: imageBuffers.length,\n            images: base64Images\n        });\n    } catch (error) {\n        return (0,_backend_errors_error_handler_js__WEBPACK_IMPORTED_MODULE_1__.handleApiError)(error, res);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvZ2VuZXJhdGUtaW1hZ2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTBFO0FBQ2dDO0FBRTNGLGVBQWVJLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUTtRQUN6QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBcUI7SUFDOUQ7SUFFQSxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLFdBQVcsV0FBVyxFQUFFLEdBQUdQLElBQUlRLElBQUk7UUFFakQsaUJBQWlCO1FBQ2pCWCw4RUFBWUEsQ0FBQ1M7UUFDYlIsa0ZBQWdCQSxDQUFDUztRQUVqQixrQkFBa0I7UUFDbEIsTUFBTUUsaUJBQWlCLElBQUlkLDRFQUFjQTtRQUN6QyxNQUFNZSxlQUFlLE1BQU1ELGVBQWVFLGFBQWEsQ0FBQ0wsTUFBTUM7UUFFOUQsK0JBQStCO1FBQy9CLE1BQU1LLGVBQWVGLGFBQWFHLEdBQUcsQ0FBQyxDQUFDQyxRQUFRQyxRQUFXO2dCQUN4REMsSUFBSUQsUUFBUTtnQkFDWkUsTUFBTUgsT0FBT0ksUUFBUSxDQUFDO2dCQUN0QkMsVUFBVTtZQUNaO1FBRUFsQixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQ25CZ0IsU0FBUztZQUNUZixTQUFTLENBQUMsVUFBVSxFQUFFSyxhQUFhVyxNQUFNLENBQUMsU0FBUyxDQUFDO1lBQ3BEQyxZQUFZWixhQUFhVyxNQUFNO1lBQy9CRSxRQUFRWDtRQUNWO0lBQ0YsRUFBRSxPQUFPWSxPQUFPO1FBQ2QsT0FBTzVCLGdGQUFjQSxDQUFDNEIsT0FBT3ZCO0lBQy9CO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWdlcy9hcGkvZ2VuZXJhdGUtaW1hZ2UuanM/MTBjYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSW1hZ2VHZW5lcmF0b3IgZnJvbSAnLi4vLi4vLi4vYmFja2VuZC9zZXJ2aWNlcy9pbWFnZS1nZW5lcmF0b3IuanMnO1xuaW1wb3J0IHsgaGFuZGxlQXBpRXJyb3IsIHZhbGlkYXRlVGV4dCwgdmFsaWRhdGVUZW1wbGF0ZSB9IGZyb20gJy4uLy4uLy4uL2JhY2tlbmQvZXJyb3JzL2Vycm9yLWhhbmRsZXIuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBtZXNzYWdlOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyB0ZXh0LCB0ZW1wbGF0ZSA9ICd0ZW1wbGF0ZTEnIH0gPSByZXEuYm9keTtcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBpbnB1dFxuICAgIHZhbGlkYXRlVGV4dCh0ZXh0KTtcbiAgICB2YWxpZGF0ZVRlbXBsYXRlKHRlbXBsYXRlKTtcbiAgICBcbiAgICAvLyBHZW5lcmF0ZSBpbWFnZXNcbiAgICBjb25zdCBpbWFnZUdlbmVyYXRvciA9IG5ldyBJbWFnZUdlbmVyYXRvcigpO1xuICAgIGNvbnN0IGltYWdlQnVmZmVycyA9IGF3YWl0IGltYWdlR2VuZXJhdG9yLmdlbmVyYXRlSW1hZ2UodGV4dCwgdGVtcGxhdGUpO1xuICAgIFxuICAgIC8vIENvbnZlcnQgYWxsIGltYWdlcyB0byBiYXNlNjRcbiAgICBjb25zdCBiYXNlNjRJbWFnZXMgPSBpbWFnZUJ1ZmZlcnMubWFwKChidWZmZXIsIGluZGV4KSA9PiAoe1xuICAgICAgaWQ6IGluZGV4ICsgMSxcbiAgICAgIGRhdGE6IGJ1ZmZlci50b1N0cmluZygnYmFzZTY0JyksXG4gICAgICBtaW1lVHlwZTogJ2ltYWdlL3BuZydcbiAgICB9KSk7XG4gICAgXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBcbiAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgbWVzc2FnZTogYEdlbmVyYXRlZCAke2ltYWdlQnVmZmVycy5sZW5ndGh9IGltYWdlKHMpYCxcbiAgICAgIGltYWdlQ291bnQ6IGltYWdlQnVmZmVycy5sZW5ndGgsXG4gICAgICBpbWFnZXM6IGJhc2U2NEltYWdlc1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBoYW5kbGVBcGlFcnJvcihlcnJvciwgcmVzKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkltYWdlR2VuZXJhdG9yIiwiaGFuZGxlQXBpRXJyb3IiLCJ2YWxpZGF0ZVRleHQiLCJ2YWxpZGF0ZVRlbXBsYXRlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwidGV4dCIsInRlbXBsYXRlIiwiYm9keSIsImltYWdlR2VuZXJhdG9yIiwiaW1hZ2VCdWZmZXJzIiwiZ2VuZXJhdGVJbWFnZSIsImJhc2U2NEltYWdlcyIsIm1hcCIsImJ1ZmZlciIsImluZGV4IiwiaWQiLCJkYXRhIiwidG9TdHJpbmciLCJtaW1lVHlwZSIsInN1Y2Nlc3MiLCJsZW5ndGgiLCJpbWFnZUNvdW50IiwiaW1hZ2VzIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/generate-image.js\n");

/***/ }),

/***/ "(api)/../shared/constants/index.js":
/*!************************************!*\
  !*** ../shared/constants/index.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   API: () => (/* binding */ API),\n/* harmony export */   CANVAS_CONFIG: () => (/* binding */ CANVAS_CONFIG),\n/* harmony export */   COLORS: () => (/* binding */ COLORS),\n/* harmony export */   DOWNLOAD: () => (/* binding */ DOWNLOAD),\n/* harmony export */   FONTS: () => (/* binding */ FONTS),\n/* harmony export */   LAYOUT: () => (/* binding */ LAYOUT),\n/* harmony export */   TEMPLATES: () => (/* binding */ TEMPLATES),\n/* harmony export */   TEXT_SHADOW: () => (/* binding */ TEXT_SHADOW),\n/* harmony export */   UI: () => (/* binding */ UI)\n/* harmony export */ });\n// Centralized configuration constants for the Quote Image Generator\n\nconst CANVAS_CONFIG = {\n  WIDTH: 1080,\n  HEIGHT: 1080,\n  INSTAGRAM_FORMAT: true\n};\n\nconst COLORS = {\n  PRIMARY_TEXT: '#F5F2ED',\n  ACCENT: '#8B7355',\n  ACCENT_HOVER: '#9A8265',\n  BACKGROUND: '#1C1B1A',\n  SECONDARY_BACKGROUND: '#2A2928',\n  BORDER: '#3E4144',\n  BORDER_FOCUS: '#8B7355'\n};\n\nconst TEMPLATES = {\n  template1: { file: 'theme-01.png', label: 'Template 1' },\n  template2: { file: 'theme-02.png', label: 'Template 2' },\n  template3: { file: 'theme-03.png', label: 'Template 3' },\n  template4: { file: 'theme-04.png', label: 'Template 4' },\n  template5: { file: 'theme-05.png', label: 'Template 5' },\n  template6: { file: 'theme-06.png', label: 'Template 6' }\n};\n\nconst FONTS = {\n  PATHS: {\n    JOST_MEDIUM: 'public/font/Jost-Medium.ttf',\n    JOST_BOLD: 'public/font/Jost-Bold.ttf',\n    CRIMSON_REGULAR: 'public/font/CrimsonText-Regular.ttf'\n  },\n  FAMILIES: {\n    JOST_MEDIUM: 'Jost Medium',\n    JOST_BOLD: 'Jost Bold',\n    CRIMSON_REGULAR: 'CrimsonText Regular'\n  }\n};\n\nconst LAYOUT = {\n  MAX_WIDTH_RATIO: 0.7, // 70% of canvas width\n  MARGIN_TOP_RATIO: 0.35, // Rule of thirds positioning\n  LINE_HEIGHT: 1.5,\n  TEXT_OPACITY: 0.85\n};\n\nconst TEXT_SHADOW = {\n  COLOR: 'rgba(0, 0, 0, 0.3)',\n  BLUR: 2,\n  OFFSET_X: 0,\n  OFFSET_Y: 0\n};\n\nconst API = {\n  ENDPOINTS: {\n    GENERATE_IMAGE: '/api/generate-image'\n  },\n  METHODS: {\n    POST: 'POST'\n  },\n  HEADERS: {\n    CONTENT_TYPE: 'application/json'\n  }\n};\n\nconst UI = {\n  CONTAINER_MAX_WIDTH: 600,\n  GRID_COLUMNS: 3,\n  IMAGE_MAX_HEIGHT: 400,\n  BORDER_RADIUS: 4,\n  BORDER_RADIUS_LARGE: 8\n};\n\nconst DOWNLOAD = {\n  DEFAULT_FILENAME: 'quote-images',\n  FILE_EXTENSION: '.png',\n  MIME_TYPE: 'image/png'\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi4vc2hhcmVkL2NvbnN0YW50cy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQLGVBQWUsMkNBQTJDO0FBQzFELGVBQWUsMkNBQTJDO0FBQzFELGVBQWUsMkNBQTJDO0FBQzFELGVBQWUsMkNBQTJDO0FBQzFELGVBQWUsMkNBQTJDO0FBQzFELGVBQWU7QUFDZjs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vc2hhcmVkL2NvbnN0YW50cy9pbmRleC5qcz84ZjA3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIENlbnRyYWxpemVkIGNvbmZpZ3VyYXRpb24gY29uc3RhbnRzIGZvciB0aGUgUXVvdGUgSW1hZ2UgR2VuZXJhdG9yXG5cbmV4cG9ydCBjb25zdCBDQU5WQVNfQ09ORklHID0ge1xuICBXSURUSDogMTA4MCxcbiAgSEVJR0hUOiAxMDgwLFxuICBJTlNUQUdSQU1fRk9STUFUOiB0cnVlXG59O1xuXG5leHBvcnQgY29uc3QgQ09MT1JTID0ge1xuICBQUklNQVJZX1RFWFQ6ICcjRjVGMkVEJyxcbiAgQUNDRU5UOiAnIzhCNzM1NScsXG4gIEFDQ0VOVF9IT1ZFUjogJyM5QTgyNjUnLFxuICBCQUNLR1JPVU5EOiAnIzFDMUIxQScsXG4gIFNFQ09OREFSWV9CQUNLR1JPVU5EOiAnIzJBMjkyOCcsXG4gIEJPUkRFUjogJyMzRTQxNDQnLFxuICBCT1JERVJfRk9DVVM6ICcjOEI3MzU1J1xufTtcblxuZXhwb3J0IGNvbnN0IFRFTVBMQVRFUyA9IHtcbiAgdGVtcGxhdGUxOiB7IGZpbGU6ICd0aGVtZS0wMS5wbmcnLCBsYWJlbDogJ1RlbXBsYXRlIDEnIH0sXG4gIHRlbXBsYXRlMjogeyBmaWxlOiAndGhlbWUtMDIucG5nJywgbGFiZWw6ICdUZW1wbGF0ZSAyJyB9LFxuICB0ZW1wbGF0ZTM6IHsgZmlsZTogJ3RoZW1lLTAzLnBuZycsIGxhYmVsOiAnVGVtcGxhdGUgMycgfSxcbiAgdGVtcGxhdGU0OiB7IGZpbGU6ICd0aGVtZS0wNC5wbmcnLCBsYWJlbDogJ1RlbXBsYXRlIDQnIH0sXG4gIHRlbXBsYXRlNTogeyBmaWxlOiAndGhlbWUtMDUucG5nJywgbGFiZWw6ICdUZW1wbGF0ZSA1JyB9LFxuICB0ZW1wbGF0ZTY6IHsgZmlsZTogJ3RoZW1lLTA2LnBuZycsIGxhYmVsOiAnVGVtcGxhdGUgNicgfVxufTtcblxuZXhwb3J0IGNvbnN0IEZPTlRTID0ge1xuICBQQVRIUzoge1xuICAgIEpPU1RfTUVESVVNOiAncHVibGljL2ZvbnQvSm9zdC1NZWRpdW0udHRmJyxcbiAgICBKT1NUX0JPTEQ6ICdwdWJsaWMvZm9udC9Kb3N0LUJvbGQudHRmJyxcbiAgICBDUklNU09OX1JFR1VMQVI6ICdwdWJsaWMvZm9udC9Dcmltc29uVGV4dC1SZWd1bGFyLnR0ZidcbiAgfSxcbiAgRkFNSUxJRVM6IHtcbiAgICBKT1NUX01FRElVTTogJ0pvc3QgTWVkaXVtJyxcbiAgICBKT1NUX0JPTEQ6ICdKb3N0IEJvbGQnLFxuICAgIENSSU1TT05fUkVHVUxBUjogJ0NyaW1zb25UZXh0IFJlZ3VsYXInXG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBMQVlPVVQgPSB7XG4gIE1BWF9XSURUSF9SQVRJTzogMC43LCAvLyA3MCUgb2YgY2FudmFzIHdpZHRoXG4gIE1BUkdJTl9UT1BfUkFUSU86IDAuMzUsIC8vIFJ1bGUgb2YgdGhpcmRzIHBvc2l0aW9uaW5nXG4gIExJTkVfSEVJR0hUOiAxLjUsXG4gIFRFWFRfT1BBQ0lUWTogMC44NVxufTtcblxuZXhwb3J0IGNvbnN0IFRFWFRfU0hBRE9XID0ge1xuICBDT0xPUjogJ3JnYmEoMCwgMCwgMCwgMC4zKScsXG4gIEJMVVI6IDIsXG4gIE9GRlNFVF9YOiAwLFxuICBPRkZTRVRfWTogMFxufTtcblxuZXhwb3J0IGNvbnN0IEFQSSA9IHtcbiAgRU5EUE9JTlRTOiB7XG4gICAgR0VORVJBVEVfSU1BR0U6ICcvYXBpL2dlbmVyYXRlLWltYWdlJ1xuICB9LFxuICBNRVRIT0RTOiB7XG4gICAgUE9TVDogJ1BPU1QnXG4gIH0sXG4gIEhFQURFUlM6IHtcbiAgICBDT05URU5UX1RZUEU6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgVUkgPSB7XG4gIENPTlRBSU5FUl9NQVhfV0lEVEg6IDYwMCxcbiAgR1JJRF9DT0xVTU5TOiAzLFxuICBJTUFHRV9NQVhfSEVJR0hUOiA0MDAsXG4gIEJPUkRFUl9SQURJVVM6IDQsXG4gIEJPUkRFUl9SQURJVVNfTEFSR0U6IDhcbn07XG5cbmV4cG9ydCBjb25zdCBET1dOTE9BRCA9IHtcbiAgREVGQVVMVF9GSUxFTkFNRTogJ3F1b3RlLWltYWdlcycsXG4gIEZJTEVfRVhURU5TSU9OOiAnLnBuZycsXG4gIE1JTUVfVFlQRTogJ2ltYWdlL3BuZydcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/../shared/constants/index.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-image&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenerate-image.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();